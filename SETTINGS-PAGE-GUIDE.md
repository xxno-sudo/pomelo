# Pomelo Settings é…ç½®é¡µé¢ä½¿ç”¨æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æ–°å¢çš„é…ç½®é¡µé¢æä¾›äº†å®Œæ•´çš„æ•°æ®æºç®¡ç†ç•Œé¢ï¼Œè®©ä½ å¯ä»¥é€šè¿‡Webç•Œé¢è½»æ¾ç®¡ç†æ•°æ®æºï¼Œæ— éœ€ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ã€‚

## ğŸ“ è®¿é—®åœ°å€

- **é¦–é¡µ**ï¼š`http://localhost:8080/`
- **é…ç½®é¡µé¢**ï¼š`http://localhost:8080/pomelo/settings`

## ğŸ–¥ï¸ é¡µé¢åŠŸèƒ½

### 1. é¦–é¡µ (/)

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- æ˜¾ç¤ºå½“å‰æ•°æ®æºçŠ¶æ€
- æä¾›å¿«é€ŸåŠŸèƒ½å…¥å£
- å±•ç¤ºAPIæ¥å£åˆ—è¡¨
- å¿«é€Ÿå¼€å§‹æŒ‡å—

**ä¸»è¦æ“ä½œ**ï¼š
- æŸ¥çœ‹å½“å‰æ•°æ®æº
- æµ‹è¯•æ•°æ®æºè¿æ¥
- å¿«é€Ÿåˆ‡æ¢æ•°æ®æº
- è¿›å…¥é…ç½®é¡µé¢

### 2. é…ç½®é¡µé¢ (/pomelo/settings)

#### Tab 1: æ•°æ®æºç®¡ç†

**åŠŸèƒ½åˆ—è¡¨**ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰æ•°æ®æºåˆ—è¡¨
- âœ… æ–°å¢æ•°æ®æºé…ç½®
- âœ… ç¼–è¾‘ç°æœ‰æ•°æ®æº
- âœ… åˆ é™¤æ•°æ®æº
- âœ… å¯ç”¨/ç¦ç”¨æ•°æ®æº
- âœ… åˆ‡æ¢å½“å‰æ•°æ®æº
- âœ… æŸ¥çœ‹æ•°æ®æºè¯¦æƒ…
- âœ… è¿æ¥çŠ¶æ€ç›‘æ§

**è¡¨æ ¼å­—æ®µè¯´æ˜**ï¼š
- **åç§°**ï¼šæ•°æ®æºæ ‡è¯†åç§°ï¼Œå½“å‰ä½¿ç”¨çš„æ•°æ®æºä¼šæœ‰ç»¿è‰²æŒ‡ç¤ºå™¨
- **æ•°æ®åº“URL**ï¼šæ•°æ®åº“è¿æ¥åœ°å€
- **ç”¨æˆ·å**ï¼šæ•°æ®åº“ç™»å½•ç”¨æˆ·å
- **é©±åŠ¨**ï¼šæ•°æ®åº“é©±åŠ¨ç±»å‹ï¼ˆMySQLã€PostgreSQLç­‰ï¼‰
- **çŠ¶æ€**ï¼šå·²å¯ç”¨/æœªå¯ç”¨
- **æœ€åæµ‹è¯•**ï¼šæœ€è¿‘ä¸€æ¬¡è¿æ¥æµ‹è¯•çš„æ—¶é—´å’Œç»“æœ

**æ“ä½œæŒ‰é’®**ï¼š
- ğŸ‘ **æŸ¥çœ‹**ï¼šæ˜¾ç¤ºæ•°æ®æºè¯¦ç»†ä¿¡æ¯
- âœï¸ **ç¼–è¾‘**ï¼šä¿®æ”¹æ•°æ®æºé…ç½®
- â–¶ï¸ **å¯ç”¨**ï¼šå¯ç”¨æœªå¯ç”¨çš„æ•°æ®æº
- ğŸ”„ **åˆ‡æ¢**ï¼šåˆ‡æ¢åˆ°è¯¥æ•°æ®æº
- ğŸ—‘ï¸ **åˆ é™¤**ï¼šåˆ é™¤æ•°æ®æºé…ç½®

#### Tab 2: ç›‘æ§é¢æ¿ï¼ˆå¼€å‘ä¸­ï¼‰

**è®¡åˆ’åŠŸèƒ½**ï¼š
- æ•°æ®æºè¿æ¥æ± çŠ¶æ€
- è¿æ¥æ•°ç»Ÿè®¡
- æ€§èƒ½ç›‘æ§å›¾è¡¨
- é”™è¯¯æ—¥å¿—æŸ¥çœ‹

#### Tab 3: ç³»ç»Ÿè®¾ç½®ï¼ˆå¼€å‘ä¸­ï¼‰

**è®¡åˆ’åŠŸèƒ½**ï¼š
- å…¨å±€é…ç½®å‚æ•°
- å®‰å…¨è®¾ç½®
- æ—¥å¿—çº§åˆ«é…ç½®
- ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹

## ğŸ”§ ä½¿ç”¨æ­¥éª¤

### æ­¥éª¤1ï¼šå¯åŠ¨åº”ç”¨

```bash
cd pomelo-demo
mvn spring-boot:run
```

### æ­¥éª¤2ï¼šè®¿é—®é¦–é¡µ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8080/`

ä½ ä¼šçœ‹åˆ°ï¼š
- å½“å‰æ•°æ®æºçŠ¶æ€ï¼ˆé»˜è®¤ä¸ºsqlite-defaultï¼‰
- åŠŸèƒ½å¡ç‰‡å’Œå¿«é€Ÿæ“ä½œæŒ‰é’®
- APIæ¥å£åˆ—è¡¨

### æ­¥éª¤3ï¼šè¿›å…¥é…ç½®é¡µé¢

ç‚¹å‡»"è¿›å…¥ç®¡ç†é¡µé¢"æŒ‰é’®æˆ–ç›´æ¥è®¿é—®ï¼š`http://localhost:8080/pomelo/settings`

### æ­¥éª¤4ï¼šç®¡ç†æ•°æ®æº

#### æ–°å¢æ•°æ®æº

1. ç‚¹å‡»å³ä¸Šè§’"+ æ–°å¢æ•°æ®æº"æŒ‰é’®
2. å¡«å†™æ•°æ®æºä¿¡æ¯ï¼š
   - **æ•°æ®æºåç§°**ï¼šå”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ï¼šmysql-prodï¼‰
   - **æ•°æ®åº“URL**ï¼šè¿æ¥åœ°å€ï¼ˆå¦‚ï¼šjdbc:mysql://localhost:3306/testï¼‰
   - **ç”¨æˆ·å**ï¼šæ•°æ®åº“ç”¨æˆ·å
   - **å¯†ç **ï¼šæ•°æ®åº“å¯†ç 
   - **é©±åŠ¨ç±»å**ï¼šä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©æ•°æ®åº“ç±»å‹
   - **è®¾ä¸ºé»˜è®¤**ï¼šæ˜¯å¦è®¾ä¸ºé»˜è®¤æ•°æ®æº
3. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®

**ç³»ç»Ÿä¼šè‡ªåŠ¨**ï¼š
- éªŒè¯æ•°æ®æºè¿æ¥
- ä¿å­˜é…ç½®åˆ°SQLite
- æ˜¾ç¤ºéªŒè¯ç»“æœ

#### å¯ç”¨æ•°æ®æº

1. æ‰¾åˆ°çŠ¶æ€ä¸º"æœªå¯ç”¨"çš„æ•°æ®æº
2. ç‚¹å‡»"â–¶ï¸"æŒ‰é’®å¯ç”¨
3. ç³»ç»Ÿä¼šé‡æ–°éªŒè¯è¿æ¥å¹¶å¯ç”¨

#### åˆ‡æ¢æ•°æ®æº

1. æ‰¾åˆ°å·²å¯ç”¨çš„æ•°æ®æº
2. ç‚¹å‡»"ğŸ”„"æŒ‰é’®åˆ‡æ¢
3. ç¡®è®¤åˆ‡æ¢æ“ä½œ
4. ç³»ç»Ÿä¼šç«‹å³åˆ‡æ¢åˆ°æ–°æ•°æ®æº

#### ç¼–è¾‘æ•°æ®æº

1. ç‚¹å‡»"âœï¸"æŒ‰é’®
2. ä¿®æ”¹é…ç½®ä¿¡æ¯
3. ä¿å­˜æ›´æ”¹
4. ç³»ç»Ÿä¼šé‡æ–°åˆ›å»ºè¿æ¥æ± 

#### åˆ é™¤æ•°æ®æº

1. ç‚¹å‡»"ğŸ—‘ï¸"æŒ‰é’®
2. ç¡®è®¤åˆ é™¤æ“ä½œ
3. ç³»ç»Ÿä¼šå…³é—­è¿æ¥æ± å¹¶åˆ é™¤é…ç½®

## ğŸ“± å“åº”å¼è®¾è®¡

é¡µé¢æ”¯æŒç§»åŠ¨è®¾å¤‡è®¿é—®ï¼š
- è‡ªé€‚åº”å¸ƒå±€
- è§¦æ‘¸å‹å¥½çš„æŒ‰é’®
- ä¼˜åŒ–çš„è¡¨æ ¼æ˜¾ç¤º
- ç§»åŠ¨ç«¯æ¨¡æ€æ¡†

## ğŸ¨ ç•Œé¢ç‰¹æ€§

### è§†è§‰è®¾è®¡
- ç°ä»£åŒ–çš„æ¸å˜è‰²è®¾è®¡
- å¡ç‰‡å¼å¸ƒå±€
- æ¸…æ™°çš„çŠ¶æ€æŒ‡ç¤º
- ç›´è§‚çš„å›¾æ ‡æŒ‰é’®

### äº¤äº’ä½“éªŒ
- å®æ—¶çŠ¶æ€æ›´æ–°
- å‹å¥½çš„é”™è¯¯æç¤º
- ç¡®è®¤å¯¹è¯æ¡†
- åŠ è½½çŠ¶æ€æŒ‡ç¤º

### çŠ¶æ€æŒ‡ç¤º
- ğŸŸ¢ **ç»¿è‰²åœ†ç‚¹**ï¼šå½“å‰ä½¿ç”¨çš„æ•°æ®æº
- ğŸ”µ **è“è‰²å¾½ç« **ï¼šé»˜è®¤æ•°æ®æº
- ğŸŸ¢ **ç»¿è‰²å¾½ç« **ï¼šå·²å¯ç”¨çŠ¶æ€
- ğŸ”´ **çº¢è‰²å¾½ç« **ï¼šæœªå¯ç”¨çŠ¶æ€

## ğŸ” æ•…éšœæ’é™¤

### 1. é¡µé¢æ— æ³•è®¿é—®

**å¯èƒ½åŸå› **ï¼š
- åº”ç”¨æœªå¯åŠ¨
- ç«¯å£è¢«å ç”¨
- é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
curl http://localhost:8080/

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080

# é‡æ–°å¯åŠ¨åº”ç”¨
mvn spring-boot:run
```

### 2. æ•°æ®æºè¿æ¥å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- æ•°æ®åº“æœåŠ¡æœªå¯åŠ¨
- è¿æ¥å‚æ•°é”™è¯¯
- ç½‘ç»œé—®é¢˜
- é©±åŠ¨ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€
- éªŒè¯è¿æ¥å‚æ•°
- æµ‹è¯•ç½‘ç»œè¿é€šæ€§
- ç¡®è®¤é©±åŠ¨ç±»åæ­£ç¡®

### 3. é¡µé¢æ˜¾ç¤ºå¼‚å¸¸

**å¯èƒ½åŸå› **ï¼š
- æµè§ˆå™¨ç¼“å­˜
- JavaScripté”™è¯¯
- CSSåŠ è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
- åˆ·æ–°é¡µé¢

## ğŸš€ é«˜çº§åŠŸèƒ½

### 1. æ‰¹é‡æ“ä½œ

é€šè¿‡JavaScriptæ§åˆ¶å°å¯ä»¥æ‰§è¡Œæ‰¹é‡æ“ä½œï¼š

```javascript
// è·å–æ‰€æœ‰æ•°æ®æº
Http.get('/api/datasource/list').then(console.log);

// æ‰¹é‡å¯ç”¨æ•°æ®æº
const dataSources = ['mysql-dev', 'mysql-test'];
dataSources.forEach(name => {
    Http.post(`/api/datasource/enable/${name}`);
});
```

### 2. è‡ªå®šä¹‰éªŒè¯

å¯ä»¥æ‰©å±•è¡¨å•éªŒè¯è§„åˆ™ï¼š

```javascript
// è‡ªå®šä¹‰URLéªŒè¯
function validateJdbcUrl(url) {
    return url.startsWith('jdbc:') && Validator.url(url.substring(5));
}
```

### 3. ä¸»é¢˜å®šåˆ¶

é€šè¿‡ä¿®æ”¹CSSå˜é‡è‡ªå®šä¹‰ä¸»é¢˜ï¼š

```css
:root {
    --primary-color: #your-color;
    --background-color: #your-bg-color;
}
```

## ğŸ“Š APIé›†æˆ

é¡µé¢ä½¿ç”¨ä»¥ä¸‹APIæ¥å£ï¼š

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/datasource/list` | GET | è·å–æ•°æ®æºåˆ—è¡¨ |
| `/api/datasource/current` | GET | è·å–å½“å‰æ•°æ®æº |
| `/api/datasource/add` | POST | æ·»åŠ æ•°æ®æº |
| `/api/datasource/update` | PUT | æ›´æ–°æ•°æ®æº |
| `/api/datasource/delete/{id}` | DELETE | åˆ é™¤æ•°æ®æº |
| `/api/datasource/switch/{name}` | POST | åˆ‡æ¢æ•°æ®æº |
| `/api/datasource/enable/{name}` | POST | å¯ç”¨æ•°æ®æº |
| `/public/datasource/test` | GET | æµ‹è¯•è¿æ¥ |

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸè®¡åˆ’
- [ ] ç›‘æ§é¢æ¿å®ç°
- [ ] ç³»ç»Ÿè®¾ç½®é¡µé¢
- [ ] æ•°æ®æºå¯¼å…¥/å¯¼å‡º
- [ ] è¿æ¥æ± ç›‘æ§

### é•¿æœŸè®¡åˆ’
- [ ] ç”¨æˆ·æƒé™ç®¡ç†
- [ ] å®¡è®¡æ—¥å¿—
- [ ] é›†ç¾¤ç®¡ç†
- [ ] æ€§èƒ½åˆ†æ

ç°åœ¨ä½ å¯ä»¥é€šè¿‡è®¿é—® `http://localhost:8080/pomelo/settings` æ¥ä½¿ç”¨å…¨æ–°çš„æ•°æ®æºç®¡ç†ç•Œé¢äº†ï¼ğŸ‰